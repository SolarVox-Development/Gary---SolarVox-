name: Discord Repository Updates

on:
  push:
    branches:
      - '**'
  pull_request:
    types: [opened, closed, reopened, merged]
  issues:
    types: [opened, closed, reopened]
  fork:
  watch:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        uses: Ilshidur/action-discord@a1c1b29d1b5f6f4a2c5c3f20df3bb1f5c8c5f9b0
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          message: |
            ${{ github.event_name == 'push' && format(
              'üöÄ **Push** to **{0}**\nBranch: {1}\nPusher: {2}\nCommit: [{3}]({4})\nMessage: {5}',
              github.repository,
              github.ref_name,
              github.actor,
              github.event.head_commit.id,
              github.event.head_commit.url,
              github.event.head_commit.message
            ) }}

            ${{ github.event_name == 'pull_request' && format(
              'üîÄ **Pull Request** in **{0}**\nTitle: {1}\nAuthor: {2}\nURL: {3}\nState: {4}',
              github.repository,
              github.event.pull_request.title,
              github.event.pull_request.user.login,
              github.event.pull_request.html_url,
              github.event.pull_request.state
            ) }}

            ${{ github.event_name == 'issues' && format(
              '‚ùó **Issue** in **{0}**\nTitle: {1}\nAuthor: {2}\nURL: {3}\nState: {4}',
              github.repository,
              github.event.issue.title,
              github.event.issue.user.login,
              github.event.issue.html_url,
              github.event.issue.state
            ) }}

            ${{ github.event_name == 'fork' && format(
              'üç¥ **{0}** forked **{1}**',
              github.actor,
              github.repository
            ) }}

            ${{ github.event_name == 'watch' && format(
              '‚≠ê **{0}** starred **{1}**',
              github.actor,
              github.repository
            ) }}
